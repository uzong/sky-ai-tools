---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const tools = await getCollection('tools');
	return tools.map(tool => ({
		params: { slug: tool.slug },
		props: { tool },
	}));
}

const { tool } = Astro.props;
const { Content } = await tool.render();
const { data } = tool;
---

<Layout title={data.name} description={data.description}>
	<div class="container" style="padding-top: 4rem;">
		<div style="display: grid; grid-template-columns: 1fr 380px; gap: 4rem;">
			<div>
				<div class="breadcrumb" style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 2rem;">
					<a href="/" style="color: inherit; text-decoration: none;">首页</a> / 
					<a href="/tools/" style="color: inherit; text-decoration: none;">AI 工具库</a> / 
					{data.name}
				</div>

				<div style="display: flex; gap: 2.5rem; align-items: flex-start; margin-bottom: 4rem;">
					<div style="width: 140px; height: 140px; background: rgba(255,255,255,0.05); border: 1px solid var(--border); border-radius: 32px; padding: 1.5rem; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
						<img src={data.logo} alt={data.name} style="max-width: 100%; max-height: 100%; object-fit: contain;" />
					</div>
					<div>
						<h1 style="font-size: 3.5rem; font-weight: 900; margin-bottom: 1rem;">{data.name}</h1>
						<p style="font-size: 1.5rem; color: var(--text-muted); margin-bottom: 2rem;">{data.description}</p>
						<div style="display: flex; gap: 1rem;">
							<a href={data.official_url} target="_blank" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2.5rem;">立即访问官网</a>
							{data.docs_url && <a href={data.docs_url} target="_blank" class="btn" style="background: rgba(255,255,255,0.05); color: white; border: 1px solid var(--border); padding: 1rem 2rem;">查看技术文档</a>}
						</div>
					</div>
				</div>

				<div class="card" style="padding: 3rem; margin-bottom: 3rem;">
					<h2 style="font-size: 1.75rem; margin-bottom: 2rem; display: flex; align-items: center; gap: 0.75rem;">
						<span style="width: 8px; height: 24px; background: var(--primary); border-radius: 4px;"></span>
						产品深度解析
					</h2>
					<div class="prose" style="font-size: 1.15rem; line-height: 1.8; color: var(--text-muted);">
						<Content />
					</div>
				</div>

				<div class="card" style="padding: 3rem;">
					<h2 style="font-size: 1.75rem; margin-bottom: 2rem; display: flex; align-items: center; gap: 0.75rem;">
						<span style="width: 8px; height: 24px; background: var(--secondary); border-radius: 4px;"></span>
						典型应用场景
					</h2>
					<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
						{data.use_cases.map(usecase => (
							<div style="background: rgba(255,255,255,0.03); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border);">
								<h4 style="color: white; margin-bottom: 0.5rem; font-size: 1.1rem;">✦ {usecase}</h4>
							</div>
						))}
					</div>
				</div>
			</div>

			<aside style="display: flex; flex-direction: column; gap: 2rem;">
				<div class="card" style="padding: 2rem;">
					<h3 style="font-size: 1.25rem; margin-bottom: 1.5rem;">核心技术亮点</h3>
					<div style="display: flex; flex-direction: column; gap: 1rem;">
						{data.highlights.map(h => (
							<div style="display: flex; gap: 1rem; align-items: flex-start;">
								<span style="color: var(--primary); font-weight: bold;">✓</span>
								<p style="font-size: 0.95rem; color: var(--text-muted);">{h}</p>
							</div>
						))}
					</div>
				</div>

				<div class="card" style="padding: 2rem;">
					<h3 style="font-size: 1.25rem; margin-bottom: 1.5rem;">价格方案</h3>
					<div style="display: flex; flex-direction: column; gap: 1rem;">
						{data.pricing.map(p => (
							<div style="padding: 1rem; background: rgba(99,102,241,0.05); border-radius: 12px; border-left: 4px solid var(--primary);">
								<p style="font-size: 1rem; color: white;">{p}</p>
							</div>
						))}
					</div>
				</div>

				<div class="card" style="padding: 2rem;">
					<h3 style="font-size: 1.25rem; margin-bottom: 1.5rem;">标签与分类</h3>
					<div style="margin-bottom: 1.5rem;">
						<p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">所属分类</p>
						<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
							{data.category.map(c => <span class="badge badge-new" style="font-size: 0.7rem;">{c}</span>)}
						</div>
					</div>
					<div>
						<p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.5rem;">技术标签</p>
						<div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
							{data.tags.map(t => <span style="font-size: 0.8rem; color: var(--primary);">#{t}</span>)}
						</div>
					</div>
				</div>
			</aside>
		</div>
	</div>
</Layout>
